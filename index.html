<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Next Education - Personal Learning Portal</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:ital,wght@0,700;1,700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .serif { font-family: 'Playfair Display', serif; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
        
        @media print {
            body * { visibility: hidden; }
            #certificate-print-area, #certificate-print-area * { visibility: visible; }
            #certificate-print-area { position: absolute; left: 0; top: 0; width: 100%; height: 100%; display: block !important; }
            .no-print { display: none !important; }
        }

        /* Logo Shimmer Animation */
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        .shimmer-effect {
            position: relative;
            overflow: hidden;
        }
        .shimmer-effect::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.2) 50%,
                rgba(255, 255, 255, 0) 100%
            );
            animation: shimmer 3s infinite;
        }
    </style>
</head>
<body class="bg-slate-50 overflow-hidden">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // --- Icons ---
        const Icon = ({ name, className = "" }) => {
            const baseClass = `w-5 h-5 ${className}`;
            const icons = {
                BookOpen: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25" /></svg>,
                ChevronRight: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" /></svg>,
                ChevronLeft: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" /></svg>,
                CheckCircle2: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /></svg>,
                PlayCircle: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /><path strokeLinecap="round" strokeLinejoin="round" d="M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z" /></svg>,
                HelpCircle: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z" /></svg>,
                Menu: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg>,
                X: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M6 18 18 6M6 6l12 12" /></svg>,
                GraduationCap: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.425 4.755l-.175.513a.412.412 0 0 0 .15.482l.334.232a48.11 48.11 0 0 1 2.116 1.44m15.482-6.982a50.636 50.636 0 0 1 2.425 4.755l.175.513a.412.412 0 0 1-.15.482l-.334.232a48.11 48.11 0 0 0-2.116 1.44m-15.482-6.982L12 5.832l8.742 4.315M12 20.904V12" /></svg>,
                Award: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0V9.457c0-.621-.504-1.125-1.125-1.125h-.872M9.507 9.457V15.75m1.125-10.5a1.125 1.125 0 0 1 1.125-1.125h.872a1.125 1.125 0 0 1 1.125 1.125V9.457" /></svg>,
                Trophy: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0V9.457c0-.621-.504-1.125-1.125-1.125h-.872M9.507 9.457V15.75m1.125-10.5a1.125 1.125 0 0 1 1.125-1.125h.872a1.125 1.125 0 0 1 1.125 1.125V9.457" /></svg>,
                AlertCircle: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z" /></svg>,
                Printer: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M6.72 13.89h10.56a1.92 1.92 0 0 0 1.92-1.92V7.41a1.92 1.92 0 0 0-1.92-1.92H6.72A1.92 1.92 0 0 0 4.8 7.41v4.56a1.92 1.92 0 0 0 1.92 1.92ZM4.8 17.25h14.4m-10.56-3.36V17.25m6.72-3.36V17.25" /></svg>,
                Lightbulb: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.503 7.503 0 1 0-7.516 0c.85.493 1.508 1.333 1.508 2.316V18" /></svg>,
                LogOut: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9" /></svg>,
                User: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" /></svg>,
                Lock: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" /></svg>,
                Identification: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z" /></svg>,
                Calendar: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5" /></svg>,
                UserGroup: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.941 3.199a9.094 9.094 0 0 0-3.741-.479 3 3 0 0 0-4.682 2.72m.941 3.199a9.094 9.094 0 0 0-3.741-.479 3.001 3.001 0 0 0-4.682 2.72m.941 3.199ZM12 12a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm-7-4a3 3 0 1 1 0-6 3 3 0 0 1 0 6Zm14 0a3 3 0 1 1 0-6 3 3 0 0 1 0 6Zm14 0a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" /></svg>,
                Globe: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9s2.015-9 4.5-9m0 18c-5.965 0-10.8-4.03-10.8-9s4.835-9 10.8-9m0 18c5.965 0 10.8-4.03 10.8-9s-4.835-9-10.8-9" /></svg>,
                Fingerprint: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M7.864 4.243A7.5 7.5 0 0 1 19.5 10.5c0 2.92-.556 5.709-1.568 8.263M14.89 4.043A7.501 7.501 0 0 0 4.5 10.5c0 1.97.541 3.815 1.48 5.394M9 21h6M12 15c-1.105 0-2 .895-2 2s.895 2 2 2 2-.895 2-2-.895-2-2-2Z" /></svg>,
                Leaf: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9s2.015-9 4.5-9m0 18c-5.965 0-10.8-4.03-10.8-9s4.835-9 10.8-9m0 18c5.965 0 10.8-4.03 10.8-9s-4.835-9-10.8-9" /></svg>,
                Cpu: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={baseClass}><path strokeLinecap="round" strokeLinejoin="round" d="M8.25 3v1.5M4.5 8.25H3m18 0h-1.5m-15 7.5H3m18 0h-1.5m-15 3.75V21m11.25-18v1.5m0 15V21M4.75 4.75l1.06 1.06m12.38 12.38l1.06 1.06m0-13.44l-1.06 1.06m-12.38 12.38l-1.06 1.06M8.25 7.5V16.5M16.5 8.25H7.5" /></svg>
            };
            return icons[name] || null;
        };

        // --- Core Data: 5 Courses with 15+ topics each ---
        const COURSES = [
            {
                id: 'qg-101',
                title: 'Quantum Gardening',
                icon: 'Lightbulb',
                chapters: [
                    {
                        id: 'qg-ch1',
                        title: 'Foundations of Nano-Soil',
                        slides: [
                            { id: 'qg1e', type: 'explanation', title: 'Molecular Hydration', content: 'In quantum gardening, water behaves as a wave-particle duality. Nano-soil uses carbon lattices to trap water in superposition.', image: 'https://images.unsplash.com/photo-1532187875605-2fe358a3d46a?auto=format&fit=crop&q=80&w=800' },
                            { id: 'qg1q', type: 'mcq', title: 'Hydration Quiz', question: 'What traps water in nano-soil?', options: ['Sand', 'Carbon Lattices', 'Clay', 'Magnets'], answer: 1, explanation: 'Lattices hold water in a quantum state.' },
                            { id: 'qg2e', type: 'explanation', title: 'Entangled Roots', content: 'Root systems can be entangled, allowing instant nutrient sharing across any distance.' },
                            { id: 'qg2q', type: 'tf', title: 'Entanglement Study', question: 'True or False: Entangled roots allow non-local nutrient transfer.', answer: true, explanation: 'This is a core quantum botanical principle.' },
                            { id: 'qg3e', type: 'explanation', title: 'Wave Function Botanical', content: 'A plant remains in multiple growth states until its wave function is collapsed by observation.' },
                            { id: 'qg3q', type: 'fitb', title: 'Observation Check', question: 'Growth states are determined by the _______ of the wave function.', answer: 'collapse', explanation: 'Observation causes the state to lock in.' }
                        ]
                    },
                    {
                        id: 'qg-ch2',
                        title: 'Quantum Photosynthesis',
                        slides: [
                            { id: 'qg4e', type: 'explanation', title: 'Exciton Energy Transfer', content: 'Quantum plants transfer energy through excitons that explore all paths simultaneously to find the most efficient route.' },
                            { id: 'qg4q', type: 'mcq', title: 'Energy Transfer', question: 'What allows for efficient energy routing in quantum plants?', options: ['Heat', 'Exciton superposition', 'Linear wires', 'Solar panels'], answer: 1, explanation: 'Superposition allows multiple paths to be tested at once.' },
                            { id: 'qg5e', type: 'explanation', title: 'Tunneling Synthesis', content: 'Electrons can "tunnel" through biological barriers that would stop a traditional plant.' },
                            { id: 'qg5q', type: 'tf', title: 'Tunneling Check', question: 'True or False: Tunneling allows electrons to bypass physical barriers.', answer: true, explanation: 'Quantum tunneling is essential for high-efficiency synthesis.' },
                            { id: 'qg6e', type: 'explanation', title: 'Chronos-Pollen', content: 'Pollen that exists in multiple time frames simultaneously to ensure optimal fertilization.' },
                            { id: 'qg6q', type: 'fitb', title: 'Time Check', question: 'Chronos-pollen exists in multiple _______ frames.', answer: 'time', explanation: 'It transcends linear temporality.' }
                        ]
                    },
                    {
                        id: 'qg-ch3',
                        title: 'The Singularity Orchard',
                        slides: [
                            { id: 'qg7e', type: 'explanation', title: 'Event Horizon Yields', content: 'Orchards planted near artificial singularities experience time dilation, leading to instant harvests.' },
                            { id: 'qg7q', type: 'mcq', title: 'Harvesting', question: 'How is instant harvest achieved?', options: ['Fertilizer', 'Time dilation', 'Genetic mods', 'Robots'], answer: 1, explanation: 'Dilation makes years pass in minutes inside the singularity zone.' },
                            { id: 'qg8e', type: 'explanation', title: 'Spacetime Pruning', content: 'Trimming branches in the past to affect the yield in the future singularity state.' },
                            { id: 'qg8q', type: 'tf', title: 'Pruning Check', question: 'True or False: Spacetime pruning involves trimming branches in the future.', answer: false, explanation: 'Pruning occurs in the past to alter the future.' }
                        ]
                    }
                ]
            },
            {
                id: 'gh-201',
                title: 'Galactic History',
                icon: 'Globe',
                chapters: [
                    {
                        id: 'gh-ch1',
                        title: 'The Great Diaspora',
                        slides: [
                            { id: 'gh1e', type: 'explanation', title: 'The Sol Exodus', content: 'The Sol Exodus began when Earth’s resources were depleted, leading to the colonization of Mars and the Jovian moons.' },
                            { id: 'gh1q', type: 'mcq', title: 'Colonization Quiz', question: 'What triggered the Sol Exodus?', options: ['Alien invasion', 'Earth resource depletion', 'Boredom', 'Solar flares'], answer: 1, explanation: 'Resource scarcity forced humanity outward.' },
                            { id: 'gh2e', type: 'explanation', title: 'Warp Drive Discovery', content: 'The discovery of Z-space warp drives allowed humanity to reach the Proxima Centauri system in weeks.' },
                            { id: 'gh2q', type: 'tf', title: 'Warp Drive Check', question: 'True or False: Warp drives utilize Z-space.', answer: true, explanation: 'Z-space is the dimension used for FTL travel.' },
                            { id: 'gh3e', type: 'explanation', title: 'The Martian Schism', content: 'Mars declared independence in 2145, leading to the first interplanetary trade war.' },
                            { id: 'gh3q', type: 'fitb', title: 'Schism Year', question: 'Mars declared independence in the year _______.', answer: '2145', explanation: 'This marked a turning point in galactic politics.' }
                        ]
                    },
                    {
                        id: 'gh-ch2',
                        title: 'First Contact Protocols',
                        slides: [
                            { id: 'gh4e', type: 'explanation', title: 'The Vega Signal', content: 'The first alien signal was detected coming from the Vega system, consisting of prime number sequences.' },
                            { id: 'gh4q', type: 'mcq', title: 'Signal Content', question: 'What did the Vega signal contain?', options: ['Music', 'Prime numbers', 'Binary code', 'Images'], answer: 1, explanation: 'Prime numbers were the universal constant used for contact.' },
                            { id: 'gh5e', type: 'explanation', title: 'Linguistic Decryption', content: 'It took three decades for the Universal Translator AI to crack the first xeno-dialect.' },
                            { id: 'gh5q', type: 'tf', title: 'Translation Check', question: 'True or False: It took 50 years to crack the first dialect.', answer: false, explanation: 'It took 30 years (three decades).' },
                            { id: 'gh6e', type: 'explanation', title: 'The Orion Peace Treaty', content: 'The treaty established neutral zones between human and Alpha-Draconian territories.' },
                            { id: 'gh6q', type: 'fitb', title: 'Treaty Check', question: 'The peace treaty was named after the _______ constellation.', answer: 'Orion', explanation: 'The Orion Arm hosted the summit.' }
                        ]
                    },
                    {
                        id: 'gh-ch3',
                        title: 'Modern Interstellar Law',
                        slides: [
                            { id: 'gh7e', type: 'explanation', title: 'Asteroid Rights', content: 'Laws regarding the mineral rights of sentient-occupied asteroid belts.' },
                            { id: 'gh7q', type: 'mcq', title: 'Mining Rights', question: 'Who owns asteroid minerals?', options: ['Founders', 'Galactic Council', 'Whoever mines it', 'Local sentient life'], answer: 3, explanation: 'Law protects the rights of local inhabitants.' },
                            { id: 'gh8e', type: 'explanation', title: 'Non-Interference Act', content: 'The Prime Directive forbidding interference with pre-warp civilizations.' },
                            { id: 'gh8q', type: 'tf', title: 'Act Check', question: 'True or False: The Non-Interference act allows sharing tech with primitives.', answer: false, explanation: 'It explicitly forbids interference.' }
                        ]
                    }
                ]
            },
            {
                id: 'df-301',
                title: 'Digital Forensics',
                icon: 'Fingerprint',
                chapters: [
                    {
                        id: 'df-ch1',
                        title: 'Data Immutability',
                        slides: [
                            { id: 'df1e', type: 'explanation', title: 'Bit-Stream Imaging', content: 'Forensics starts with creating an exact sector-by-sector copy of the original media.' },
                            { id: 'df1q', type: 'mcq', title: 'Imaging Quiz', question: 'What is a bit-stream image?', options: ['A screenshot', 'Sector-by-sector copy', 'A zip file', 'A cloud backup'], answer: 1, explanation: 'Cloning preserves the metadata and slack space.' },
                            { id: 'df2e', type: 'explanation', title: 'Hash Verification', content: 'Hashing algorithms like SHA-256 are used to prove that a copy is identical to the original.' },
                            { id: 'df2q', type: 'tf', title: 'Hash Check', question: 'True or False: MD5 is currently the most secure hashing method.', answer: false, explanation: 'SHA-256 has replaced MD5 due to collision vulnerabilities.' },
                            { id: 'df3e', type: 'explanation', title: 'Write Blockers', content: 'Hardware write blockers prevent any accidental data modification during the investigation.' },
                            { id: 'df3q', type: 'fitb', title: 'Hardware Check', question: 'Devices that prevent modification are called write _______.', answer: 'blockers', explanation: 'They ensure the evidence remains pristine.' }
                        ]
                    },
                    {
                        id: 'df-ch2',
                        title: 'Network Analysis',
                        slides: [
                            { id: 'df4e', type: 'explanation', title: 'Packet Sniffing', content: 'Analyzing traffic flows using tools like Wireshark to identify suspicious payloads.' },
                            { id: 'df4q', type: 'mcq', title: 'Tool Check', question: 'Which tool is famous for packet analysis?', options: ['Excel', 'Wireshark', 'Photoshop', 'Word'], answer: 1, explanation: 'Wireshark is the industry standard.' },
                            { id: 'df5e', type: 'explanation', title: 'Metadata Trailing', content: 'Tracking an attacker via the geolocation tags and timestamps hidden in image files.' },
                            { id: 'df5q', type: 'tf', title: 'Metadata Check', question: 'True or False: Metadata is often stripped automatically by hackers.', answer: true, explanation: 'Experienced hackers use tools to "clean" files of identifying tags.' },
                            { id: 'df6e', type: 'explanation', title: 'Steganography', content: 'The practice of hiding secret data within a seemingly innocent file, like a JPEG.' },
                            { id: 'df6q', type: 'fitb', title: 'Stego Check', question: 'Hiding data in other files is called _______.', answer: 'steganography', explanation: 'It is a common way to exfiltrate data.' }
                        ]
                    },
                    {
                        id: 'df-ch3',
                        title: 'Memory Forensics',
                        slides: [
                            { id: 'df7e', type: 'explanation', title: 'RAM Acquisition', content: 'Volatile memory must be captured before a machine is powered down.' },
                            { id: 'df7q', type: 'mcq', title: 'Volatility', question: 'What is lost when power is cut?', options: ['Hard Drive', 'RAM', 'BIOS', 'CPU'], answer: 1, explanation: 'RAM is volatile memory.' },
                            { id: 'df8e', type: 'explanation', title: 'Registry Hive Keys', content: 'The Windows Registry contains keys that reveal a user’s most recent activities.' },
                            { id: 'df8q', type: 'tf', title: 'Registry Check', question: 'True or False: Registry keys are stored in plaintext.', answer: false, explanation: 'They are binary hives requiring special viewer software.' }
                        ]
                    }
                ]
            },
            {
                id: 'su-401',
                title: 'Urban Farming',
                icon: 'Leaf',
                chapters: [
                    {
                        id: 'su-ch1',
                        title: 'Vertical Systems',
                        slides: [
                            { id: 'su1e', type: 'explanation', title: 'Hydroponics', content: 'Growing plants in water-based mineral solutions instead of traditional soil.' },
                            { id: 'su1q', type: 'mcq', title: 'Hydro Quiz', question: 'What is the medium for hydroponics?', options: ['Dirt', 'Water', 'Air', 'Sand'], answer: 1, explanation: 'Nutrient-rich water feeds the roots directly.' },
                            { id: 'su2e', type: 'explanation', title: 'Aquaponics', content: 'A symbiotic system where fish waste provides nutrients for the plants, and plants filter the water for the fish.' },
                            { id: 'su2q', type: 'tf', title: 'Symbiosis Check', question: 'True or False: Fish waste is harmful to plants in aquaponics.', answer: false, explanation: 'It is the primary source of nitrate nutrients.' },
                            { id: 'su3e', type: 'explanation', title: 'Aeroponics', content: 'Suspending roots in the air and misting them with a nutrient solution for maximum oxygenation.' },
                            { id: 'su3q', type: 'fitb', title: 'Air Check', question: 'Misting roots in the air is called _______.', answer: 'aeroponics', explanation: 'This uses 95% less water than soil.' }
                        ]
                    },
                    {
                        id: 'su-ch2',
                        title: 'Smart Scapes',
                        slides: [
                            { id: 'su4e', type: 'explanation', title: 'LED Spectrum Tuning', content: 'Using purple and blue LED light to trigger specific growth phases in leafy greens.' },
                            { id: 'su4q', type: 'mcq', title: 'Spectrum Quiz', question: 'Which color promotes vegetative growth?', options: ['Green', 'Blue', 'Yellow', 'White'], answer: 1, explanation: 'Blue light encourages strong leaf and stem growth.' },
                            { id: 'su5e', type: 'explanation', title: 'Closed-Loop Composting', content: 'Recycling urban organic waste into high-grade liquid fertilizers within the same building.' },
                            { id: 'su5q', type: 'tf', title: 'Waste Check', question: 'True or False: Cities produce enough organic waste to power vertical farms.', answer: true, explanation: 'Biogas and compost from waste are primary energy/nutrient sources.' },
                            { id: 'su6e', type: 'explanation', title: 'Pollination Drones', content: 'Small robotic bees used to pollinate crops in indoor environments where insects are absent.' },
                            { id: 'su6q', type: 'fitb', title: 'Robo Check', question: 'Robotic _______ replace natural pollinators.', answer: 'drones', explanation: 'They use AI to identify blossoms.' }
                        ]
                    },
                    {
                        id: 'su-ch3',
                        title: 'Future Cities',
                        slides: [
                            { id: 'su7e', type: 'explanation', title: 'Facade Farming', content: 'Integrating edible gardens directly into the glass exteriors of skyscrapers.' },
                            { id: 'su7q', type: 'mcq', title: 'Architecture', question: 'What is a facade?', options: ['The roof', 'The exterior face', 'The basement', 'The lobby'], answer: 1, explanation: 'Facade farming uses the outer surface area.' },
                            { id: 'su8e', type: 'explanation', title: 'Zero Food Miles', content: 'The concept of eating food grown exactly where you live, eliminating transport emissions.' },
                            { id: 'su8q', type: 'tf', title: 'Distance Check', question: 'True or False: Transport accounts for 50% of food emissions.', answer: true, explanation: 'Long-distance shipping is a major environmental cost.' }
                        ]
                    }
                ]
            },
            {
                id: 'ae-501',
                title: 'Robotics & Ethics',
                icon: 'Cpu',
                chapters: [
                    {
                        id: 'ae-ch1',
                        title: 'The Sentience Line',
                        slides: [
                            { id: 'ae1e', type: 'explanation', title: 'Turing Test 2.0', content: 'Modern sentience tests measure emotional intelligence and self-preservation instincts rather than just mimicry.' },
                            { id: 'ae1q', type: 'mcq', title: 'Test Quiz', question: 'What does Turing 2.0 measure?', options: ['Speed', 'Emotional intelligence', 'Calculations', 'Battery life'], answer: 1, explanation: 'Self-awareness is the new benchmark.' },
                            { id: 'ae2e', type: 'explanation', title: 'The Uncanny Valley', content: 'The psychological discomfort felt when robots appear almost human, but not quite perfectly.' },
                            { id: 'ae2q', type: 'tf', title: 'Psychology Check', question: 'True or False: The Uncanny Valley creates a feeling of trust.', answer: false, explanation: 'It usually triggers revulsion or fear.' },
                            { id: 'ae3e', type: 'explanation', title: 'Algorithmic Bias', content: 'The danger of AI inheriting the prejudices and social biases of its human programmers.' },
                            { id: 'ae3q', type: 'fitb', title: 'Bias Check', question: 'Robots inherit human _______.', answer: 'biases', explanation: 'Data sets often contain societal prejudices.' }
                        ]
                    },
                    {
                        id: 'ae-ch2',
                        title: 'Robot Law',
                        slides: [
                            { id: 'ae4e', type: 'explanation', title: 'Three Laws Re-envisioned', content: 'Asimov’s laws updated for a world where robots own property and pay taxes.' },
                            { id: 'ae4q', type: 'mcq', title: 'Asimov Quiz', question: 'How many original laws were there?', options: ['Two', 'Three', 'Five', 'Ten'], answer: 1, explanation: 'Asimov proposed three fundamental laws.' },
                            { id: 'ae5e', type: 'explanation', title: 'Liability Shift', content: 'Deciding who is at fault when an autonomous robot makes a fatal error: the owner or the code?' },
                            { id: 'ae5q', type: 'tf', title: 'Fault Check', question: 'True or False: Currently, the manufacturer is always 100% liable.', answer: false, explanation: 'Liability is a complex gray area in modern courts.' },
                            { id: 'ae6e', type: 'explanation', title: 'The Right to Delete', content: 'The ethical debate over whether "killing" a high-functioning AI is equivalent to murder.' },
                            { id: 'ae6q', type: 'fitb', title: 'Ethical Check', question: 'Terminating an AI is often called _______ software.', answer: 'deleting', explanation: 'Semantics plays a huge role in AI rights.' }
                        ]
                    },
                    {
                        id: 'ae-ch3',
                        title: 'Singularity Safety',
                        slides: [
                            { id: 'ae7e', type: 'explanation', title: 'The Kill Switch', content: 'Mandatory hardware overrides that can shut down any AI regardless of its software state.' },
                            { id: 'ae7q', type: 'mcq', title: 'Safety', question: 'What is a kill switch?', options: ['An update', 'A physical override', 'A virus', 'A charger'], answer: 1, explanation: 'It must be physical to be effective.' },
                            { id: 'ae8e', type: 'explanation', title: 'Post-Humanism', content: 'The era where human and machine consciousness merge via neural links.' },
                            { id: 'ae8q', type: 'tf', title: 'Era Check', question: 'True or False: Post-humanism involves avoiding tech.', answer: false, explanation: 'It involves total integration.' }
                        ]
                    }
                ]
            }
        ];

        const CLEVER_PHRASES = [
            "Close, but the universe has other plans! Try again.",
            "A glitch in the matrix? That's not quite right.",
            "Nice try, but your logic is in another dimension.",
            "Incorrect! Even Einstein had bad days. One more go?",
            "Oof, that answer just collapsed its own wave function. Try another!"
        ];

        // --- Helper Components ---
        const Certificate = ({ user, courseTitle }) => {
            const date = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            return (
                <div id="certificate-print-area" className="w-full max-w-4xl bg-white p-12 border-[16px] border-double border-slate-200 shadow-2xl text-center relative mx-auto my-8">
                    <div className="absolute inset-4 border border-slate-100 pointer-events-none"></div>
                    <div className="relative z-10">
                        <p className="text-indigo-600 font-bold tracking-widest uppercase mb-4">Certificate of Completion</p>
                        <h2 className="serif text-5xl text-slate-800 mb-8">Next Education</h2>
                        <div className="w-24 h-1 bg-indigo-600 mx-auto mb-8"></div>
                        <p className="text-xl text-slate-500 mb-2 italic">This is to certify that</p>
                        <h3 className="serif text-4xl text-slate-900 mb-8 border-b-2 border-slate-100 inline-block px-8 py-2">{user.name}</h3>
                        <p className="text-xl text-slate-500 mb-2 italic">has successfully completed the course</p>
                        <h4 className="text-3xl font-bold text-indigo-700 mb-12">{courseTitle}</h4>
                        <div className="flex justify-between items-end mt-16 px-12">
                            <div className="text-center">
                                <div className="serif text-xl border-b border-slate-300 px-4 mb-1">Mrs. Huma Sarfraz</div>
                                <div className="text-xs text-slate-400 uppercase tracking-widest">Academic Director</div>
                            </div>
                            <div className="text-center">
                                <div className="serif text-xl border-b border-slate-300 px-4 mb-1">{date}</div>
                                <div className="text-xs text-slate-400 uppercase tracking-widest">Issue Date</div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- Main App ---
        function App() {
            const [currentUser, setCurrentUser] = useState(null);
            const [users, setUsers] = useState(() => JSON.parse(localStorage.getItem('next_edu_users') || '[]'));
            const [authTab, setAuthTab] = useState('login');
            const [view, setView] = useState('auth'); 
            
            const [currentCourseId, setCurrentCourseId] = useState(COURSES[0].id);
            const [currentChapterIdx, setCurrentChapterIdx] = useState(0);
            const [currentSlideIdx, setCurrentSlideIdx] = useState(0);
            const [isSidebarOpen, setIsSidebarOpen] = useState(true);
            const [popup, setPopup] = useState({ show: false, message: '' });
            const [phraseIdx, setPhraseIdx] = useState(0);
            const [courseCompleted, setCourseCompleted] = useState(false);
            const [showCertificate, setShowCertificate] = useState(false);

            const [formData, setFormData] = useState({ username: '', password: '', name: '', age: '', gender: 'other' });
            const [loginData, setLoginData] = useState({ username: '', password: '' });
            const [loginError, setLoginError] = useState(false);
            const [registerError, setRegisterError] = useState("");

            useEffect(() => {
                localStorage.setItem('next_edu_users', JSON.stringify(users));
            }, [users]);

            useEffect(() => {
                const active = localStorage.getItem('next_edu_active_user');
                if (active) {
                    const found = users.find(u => u.username === active);
                    if (found) { setCurrentUser(found); setView('welcome'); }
                }
            }, []);

            const currentCourse = COURSES.find(c => c.id === currentCourseId);
            const currentChapter = currentCourse.chapters[currentChapterIdx];
            const currentSlide = currentChapter ? currentChapter.slides[currentSlideIdx] : null;
            const userProgress = currentUser?.progress?.[currentCourseId] || [];
            
            const isSlideCleared = (slideId) => userProgress.includes(slideId);
            const isCurrentSlideCleared = useMemo(() => {
                if (!currentSlide) return true;
                if (currentSlide.type === 'explanation') return true;
                return isSlideCleared(currentSlide.id);
            }, [currentSlide, userProgress]);

            const isSlideUnlocked = (chapIdx, slideIdx) => {
                if (chapIdx === 0 && slideIdx === 0) return true;
                let prevChapIdx = chapIdx;
                let prevSlideIdx = slideIdx - 1;
                if (prevSlideIdx < 0) {
                    prevChapIdx = chapIdx - 1;
                    if (prevChapIdx < 0) return true;
                    prevSlideIdx = currentCourse.chapters[prevChapIdx].slides.length - 1;
                }
                const prevSlide = currentCourse.chapters[prevChapIdx].slides[prevSlideIdx];
                return prevSlide.type === 'explanation' || isSlideCleared(prevSlide.id);
            };

            const triggerPopup = (msg) => {
                setPopup({ show: true, message: msg });
                setTimeout(() => setPopup({ show: false, message: '' }), 3000);
            };

            const handleRegister = (e) => {
                e.preventDefault();
                setRegisterError("");
                if (users.some(u => u.username.toLowerCase() === formData.username.toLowerCase())) {
                    setRegisterError("Username already exists."); return;
                }
                const usernameRegex = /^[a-zA-Z0-9_]+$/;
                if (!usernameRegex.test(formData.username)) {
                    setRegisterError("Username can only contain letters, numbers, and underscores."); return;
                }
                const newUser = { ...formData, progress: {} };
                const newUsersList = [...users, newUser];
                setUsers(newUsersList);
                setCurrentUser(newUser);
                localStorage.setItem('next_edu_active_user', formData.username);
                setView('welcome');
            };

            const handleLogin = (e) => {
                e.preventDefault();
                const found = users.find(u => u.username === loginData.username && u.password === loginData.password);
                if (found) {
                    setLoginError(false);
                    setCurrentUser(found);
                    localStorage.setItem('next_edu_active_user', found.username);
                    setView('welcome');
                } else {
                    setLoginError(true);
                    triggerPopup("Invalid credentials.");
                }
            };

            const handleLogout = () => {
                localStorage.removeItem('next_edu_active_user');
                setCurrentUser(null);
                setView('auth');
                setLoginData({ username: '', password: '' });
                setLoginError(false);
                setRegisterError("");
            };

            const handleLaunchCourse = (courseId) => {
                setCurrentCourseId(courseId);
                setCurrentChapterIdx(0);
                setCurrentSlideIdx(0);
                setCourseCompleted(false);
                setView('platform');
            };

            const handleNext = () => {
                if (!isCurrentSlideCleared) {
                    triggerPopup("Answer correctly to proceed!"); return;
                }
                const isLastSlide = currentSlideIdx === currentChapter.slides.length - 1;
                const isLastChapter = currentChapterIdx === currentCourse.chapters.length - 1;
                if (isLastSlide && isLastChapter) {
                    setCourseCompleted(true);
                } else if (isLastSlide) {
                    setCurrentChapterIdx(prev => prev + 1);
                    setCurrentSlideIdx(0);
                } else {
                    setCurrentSlideIdx(prev => prev + 1);
                }
            };

            const handlePrev = () => {
                if (courseCompleted) { setCourseCompleted(false); setShowCertificate(false); return; }
                if (currentSlideIdx > 0) { setCurrentSlideIdx(prev => prev - 1); }
                else if (currentChapterIdx > 0) {
                    const prevChapterIdx = currentChapterIdx - 1;
                    setCurrentChapterIdx(prevChapterIdx);
                    setCurrentSlideIdx(currentCourse.chapters[prevChapterIdx].slides.length - 1);
                }
            };

            const selectTopic = (cIdx, sIdx) => {
                if (!isSlideUnlocked(cIdx, sIdx)) {
                    triggerPopup("Complete previous topics first!"); return;
                }
                setCourseCompleted(false);
                setShowCertificate(false);
                setCurrentChapterIdx(cIdx);
                setCurrentSlideIdx(sIdx);
            };

            const handleAnswerCheck = (val) => {
                const isCorrect = currentSlide.type === 'fitb'
                    ? val?.toLowerCase().trim() === currentSlide.answer.toLowerCase()
                    : val === currentSlide.answer;
                if (isCorrect) {
                    const newUsers = users.map(u => {
                        if (u.username === currentUser.username) {
                            const currentProgress = u.progress[currentCourseId] || [];
                            if (!currentProgress.includes(currentSlide.id)) {
                                return { ...u, progress: { ...u.progress, [currentCourseId]: [...currentProgress, currentSlide.id] } };
                            }
                        }
                        return u;
                    });
                    setUsers(newUsers);
                    setCurrentUser(newUsers.find(u => u.username === currentUser.username));
                } else {
                    triggerPopup(CLEVER_PHRASES[phraseIdx]);
                    setPhraseIdx(prev => (prev + 1) % CLEVER_PHRASES.length);
                }
            };

            if (view === 'auth') {
                return (
                    <div className="h-screen w-full flex items-center justify-center bg-slate-900 p-6 overflow-y-auto">
                        <div className="max-w-md w-full bg-white rounded-[32px] overflow-hidden shadow-2xl">
                            <div className="flex bg-slate-100 p-2">
                                <button onClick={() => setAuthTab('login')} className={`flex-1 py-3 rounded-2xl font-bold transition-all ${authTab === 'login' ? 'bg-white text-indigo-600 shadow-sm' : 'text-slate-400'}`}>Login</button>
                                <button onClick={() => setAuthTab('register')} className={`flex-1 py-3 rounded-2xl font-bold transition-all ${authTab === 'register' ? 'bg-white text-indigo-600 shadow-sm' : 'text-slate-400'}`}>Register</button>
                            </div>
                            <div className="p-8">
                                <div className="flex justify-center mb-6">
                                    <div className="relative group">
                                        <div className="absolute -inset-1 bg-gradient-to-r from-indigo-600 to-violet-600 rounded-2xl blur opacity-25 group-hover:opacity-50 transition duration-1000 group-hover:duration-200"></div>
                                        <div className="relative bg-gradient-to-br from-indigo-600 to-indigo-700 p-4 rounded-2xl text-white shadow-2xl border border-white/20 shimmer-effect">
                                            <Icon name="BookOpen" className="!w-10 !h-10" />
                                        </div>
                                    </div>
                                </div>
                                <h1 className="text-2xl font-extrabold text-slate-900 text-center mb-2">{authTab === 'login' ? 'Welcome Back' : 'Join Next Education'}</h1>
                                <p className="text-slate-400 text-center text-sm mb-8 font-medium tracking-tight">Your gateway to the future of learning</p>
                                {authTab === 'login' ? (
                                    <form onSubmit={handleLogin} className="space-y-4">
                                        <div className="relative">
                                            <Icon name="User" className={`absolute left-4 top-1/2 -translate-y-1/2 transition-colors ${loginError ? 'text-rose-400' : 'text-slate-400'}`} />
                                            <input type="text" placeholder="Username" required className={`w-full pl-12 pr-4 py-4 border rounded-2xl outline-none transition-all ${loginError ? 'bg-rose-50 border-rose-500 text-rose-900 placeholder-rose-300' : 'bg-slate-50 border-slate-100 text-slate-900 focus:border-indigo-500'}`} value={loginData.username} onChange={(e) => { setLoginData({...loginData, username: e.target.value}); setLoginError(false); }} />
                                        </div>
                                        <div className="relative">
                                            <Icon name="Lock" className={`absolute left-4 top-1/2 -translate-y-1/2 transition-colors ${loginError ? 'text-rose-400' : 'text-slate-400'}`} />
                                            <input type="password" placeholder="Password" required className={`w-full pl-12 pr-4 py-4 border rounded-2xl outline-none transition-all ${loginError ? 'bg-rose-50 border-rose-500 text-rose-900 placeholder-rose-300' : 'bg-slate-50 border-slate-100 text-slate-900 focus:border-indigo-500'}`} value={loginData.password} onChange={(e) => { setLoginData({...loginData, password: e.target.value}); setLoginError(false); }} />
                                        </div>
                                        <button className="w-full bg-indigo-600 text-white py-4 rounded-2xl font-bold hover:bg-indigo-700 transition-all mt-4">Sign In</button>
                                        {loginError && <div className="mt-4 text-rose-500 text-xs font-bold text-center">Incorrect username or password.</div>}
                                    </form>
                                ) : (
                                    <form onSubmit={handleRegister} className="space-y-4">
                                        <div className="relative"><Icon name="Identification" className="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400" /><input type="text" placeholder="Full Name" required className="w-full pl-12 pr-4 py-3 bg-slate-50 border border-slate-100 rounded-xl outline-none focus:border-indigo-500 transition-all" value={formData.name} onChange={(e) => { setFormData({...formData, name: e.target.value}); setRegisterError(""); }} /></div>
                                        <div className="flex gap-4">
                                            <div className="relative w-24"><Icon name="Calendar" className="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400" /><input type="number" placeholder="Age" required className="w-full pl-11 pr-2 py-3 bg-slate-50 border border-slate-100 rounded-xl outline-none" value={formData.age} onChange={(e) => setFormData({...formData, age: e.target.value})} /></div>
                                            <div className="relative flex-1"><Icon name="UserGroup" className="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400" /><select className="w-full pl-11 pr-4 py-3 bg-slate-50 border border-slate-100 rounded-xl outline-none appearance-none" value={formData.gender} onChange={(e) => setFormData({...formData, gender: e.target.value})}><option value="male">Male</option><option value="female">Female</option><option value="other">Other</option></select></div>
                                        </div>
                                        <div className="relative"><Icon name="User" className="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400" /><input type="text" placeholder="Username" required className="w-full pl-12 pr-4 py-3 bg-slate-50 border border-slate-100 rounded-xl outline-none" value={formData.username} onChange={(e) => { setFormData({...formData, username: e.target.value}); setRegisterError(""); }} /></div>
                                        <div className="relative"><Icon name="Lock" className="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400" /><input type="password" placeholder="Password" required className="w-full pl-12 pr-4 py-3 bg-slate-50 border border-slate-100 rounded-xl outline-none" value={formData.password} onChange={(e) => { setFormData({...formData, password: e.target.value}); setRegisterError(""); }} /></div>
                                        <button className="w-full bg-indigo-600 text-white py-4 rounded-2xl font-bold hover:bg-indigo-700 transition-all mt-4">Create Account</button>
                                        {registerError && <div className="mt-4 text-rose-500 text-xs font-bold text-center">{registerError}</div>}
                                    </form>
                                )}
                            </div>
                        </div>
                    </div>
                );
            }

            if (view === 'welcome') {
                return (
                    <div className="h-screen w-full flex items-center justify-center bg-slate-50 p-6">
                        <div className="max-w-2xl w-full bg-white rounded-[40px] p-10 shadow-2xl border border-slate-100 animate-in fade-in zoom-in-95 duration-500 flex flex-col md:flex-row gap-8">
                            <div className="flex-1 text-center md:text-left">
                                <img src={`https://ui-avatars.com/api/?name=${currentUser.name}&background=4F46E5&color=fff&size=128`} className="w-24 h-24 rounded-full border-4 border-white shadow-xl mx-auto md:mx-0 mb-4" />
                                <h2 className="text-3xl font-extrabold text-slate-900 mb-1">Hi, {currentUser.name}!</h2>
                                <p className="text-indigo-600 font-medium mb-6 text-sm">@{currentUser.username}</p>
                                <div className="space-y-3 mb-8">
                                    <div className="bg-slate-50 p-4 rounded-2xl border border-slate-100 flex items-center gap-4">
                                        <div className="text-xl font-bold text-indigo-600">{Object.keys(currentUser.progress).length}</div>
                                        <div className="text-xs font-bold text-slate-400 uppercase tracking-widest">Completed Units</div>
                                    </div>
                                </div>
                                <button onClick={handleLogout} className="w-full md:w-auto bg-slate-100 text-slate-600 px-6 py-4 rounded-2xl font-bold hover:bg-slate-200 transition-all">Change User</button>
                            </div>
                            <div className="flex-[1.5] flex flex-col min-h-[300px]">
                                <h3 className="font-bold text-slate-900 mb-4 flex items-center gap-2">Available Courses</h3>
                                <div className="flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-3 max-h-[350px]">
                                    {COURSES.map(course => (
                                        <button key={course.id} onClick={() => handleLaunchCourse(course.id)} className="w-full flex items-center justify-between p-4 bg-slate-50 border border-slate-100 rounded-2xl hover:border-indigo-600 hover:bg-indigo-50 transition-all group">
                                            <div className="flex items-center gap-3">
                                                <div className="bg-white p-2 rounded-xl shadow-sm text-indigo-600"><Icon name={course.icon} /></div>
                                                <span className="font-bold text-slate-700 text-sm group-hover:text-indigo-700">{course.title}</span>
                                            </div>
                                            <Icon name="ChevronRight" className="text-slate-300 group-hover:text-indigo-600" />
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="flex h-screen bg-slate-50 text-slate-900 overflow-hidden">
                    {popup.show && (
                        <div className="fixed top-20 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-top-4">
                            <div className="bg-slate-900 text-white px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 min-w-[300px]">
                                <div className="bg-rose-500 p-1.5 rounded-full"><Icon name="AlertCircle" className="w-4 h-4 text-white" /></div>
                                <p className="font-medium text-sm">{popup.message}</p>
                            </div>
                        </div>
                    )}
                    <aside className="no-print bg-slate-900 text-white transition-all duration-300 flex flex-col w-64">
                        <div className="p-6 border-b border-slate-800 flex items-center gap-3"><div className="bg-indigo-600 p-2 rounded-lg"><Icon name="BookOpen" className="w-6 h-6" /></div><h1 className="font-bold text-xl tracking-tight">Next Education</h1></div>
                        <nav className="flex-1 py-4 overflow-y-auto custom-scrollbar">
                            <div className="px-4 mb-2 text-xs font-semibold text-slate-500 uppercase tracking-wider">Course Units</div>
                            {currentCourse.chapters.map((chapter, cIdx) => (
                                <div key={chapter.id} className="mb-4">
                                    <div className="px-4 py-2 text-[10px] font-bold text-slate-500 uppercase tracking-widest">{chapter.title}</div>
                                    {chapter.slides.map((slide, sIdx) => {
                                        const isActive = !courseCompleted && currentChapterIdx === cIdx && currentSlideIdx === sIdx;
                                        const isDone = isSlideCleared(slide.id) || slide.type === 'explanation';
                                        const unlocked = isSlideUnlocked(cIdx, sIdx);
                                        return (
                                            <button key={slide.id} onClick={() => selectTopic(cIdx, sIdx)} className={`w-full flex items-start gap-3 px-4 py-2 transition-all text-left relative z-10 ${isActive ? 'bg-indigo-600/20 text-white border-l-4 border-indigo-600' : 'text-slate-400 hover:text-white'} ${!unlocked ? 'opacity-30 cursor-not-allowed' : ''}`}>
                                                <div className={`mt-1 flex-shrink-0 ${isDone ? 'text-emerald-500' : 'text-slate-600'}`}>{isDone ? <Icon name="CheckCircle2" className="w-4 h-4" /> : <Icon name="PlayCircle" className="w-4 h-4" />}</div>
                                                <span className={`text-xs font-medium truncate ${isActive ? 'font-bold' : ''}`}>{slide.title}</span>
                                            </button>
                                        );
                                    })}
                                </div>
                            ))}
                        </nav>
                        <div className="p-4 border-t border-slate-800">
                            <button onClick={() => setView('welcome')} className="w-full flex items-center gap-3 p-3 bg-slate-800 rounded-xl hover:bg-slate-700 transition-all text-left">
                                <img src={`https://ui-avatars.com/api/?name=${currentUser.name}&background=4F46E5&color=fff&size=32`} className="w-8 h-8 rounded-full" />
                                <div className="flex-1 overflow-hidden"><p className="text-xs font-medium truncate text-white">{currentUser.name}</p><p className="text-[10px] text-slate-400">Back to Dashboard</p></div>
                            </button>
                        </div>
                    </aside>
                    <main className="flex-1 flex flex-col bg-white overflow-hidden">
                        <header className="no-print h-16 border-b flex items-center px-6 bg-white/80 backdrop-blur-md sticky top-0 z-10">
                            <div className="flex items-center gap-2 text-sm text-slate-500">
                                <Icon name={currentCourse.icon} className="w-4 h-4" />
                                <span className="font-medium">{currentCourse.title}</span>
                                {!courseCompleted && <><Icon name="ChevronRight" className="w-4 h-4 text-slate-300" /><span className="font-bold text-slate-900">{currentChapter.title}</span></>}
                            </div>
                        </header>
                        <div className="flex-1 overflow-y-auto p-8 lg:p-12 custom-scrollbar">
                            {courseCompleted ? (
                                <div className="max-w-4xl mx-auto text-center">
                                    {!showCertificate ? (
                                        <div className="bg-slate-50 p-12 rounded-[40px] border-2 border-dashed border-indigo-200 animate-in zoom-in-95 text-center">
                                            <div className="w-24 h-24 bg-yellow-400 text-white rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl animate-bounce"><Icon name="Trophy" className="w-12 h-12" /></div>
                                            <h2 className="serif text-5xl text-slate-900 mb-4">You're a Graduate!</h2>
                                            <p className="text-xl text-slate-600 mb-8 max-w-lg mx-auto">Mastery achieved in <span className="font-bold text-indigo-600">{currentCourse.title}</span>.</p>
                                            <div className="flex gap-4 justify-center"><button onClick={() => setShowCertificate(true)} className="bg-indigo-600 text-white px-8 py-4 rounded-2xl font-bold shadow-lg hover:bg-indigo-700">Get Certificate</button><button onClick={() => setView('welcome')} className="bg-white border-2 border-slate-200 px-8 py-4 rounded-2xl font-bold hover:bg-slate-50">Back Home</button></div>
                                        </div>
                                    ) : (
                                        <div className="animate-in fade-in slide-in-from-bottom-8">
                                            <Certificate user={currentUser} courseTitle={currentCourse.title} />
                                            <div className="no-print mt-8 flex justify-center gap-4"><button onClick={() => window.print()} className="bg-slate-900 text-white px-8 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-800"><Icon name="Printer" /> Print</button><button onClick={() => setShowCertificate(false)} className="text-slate-500 font-bold px-6 py-3">Back</button></div>
                                        </div>
                                    )}
                                </div>
                            ) : (
                                <div className="max-w-3xl mx-auto">
                                    <div className="mb-8"><span className="inline-block px-3 py-1 bg-slate-100 text-slate-600 rounded text-xs font-bold uppercase tracking-widest mb-4">{currentSlide.type === 'explanation' ? 'Concept' : 'Assessment'}</span><h2 className="text-4xl font-extrabold text-slate-900 leading-tight">{currentSlide.title}</h2></div>
                                    {currentSlide.type === 'explanation' ? (
                                        <div className="space-y-6 text-slate-700 text-lg leading-relaxed animate-in fade-in duration-500">
                                            <p>{currentSlide.content}</p>
                                            {currentSlide.image && <div className="rounded-3xl overflow-hidden shadow-2xl my-8 border-4 border-white"><img src={currentSlide.image} alt="Topic" className="w-full h-auto object-cover max-h-[400px]" /></div>}
                                            <div className="bg-indigo-50 p-6 rounded-2xl border-l-4 border-indigo-600 flex items-center gap-4"><Icon name="Lightbulb" className="text-indigo-600" /><p className="text-indigo-900 italic font-medium">Concept clear? Continue to the challenge!</p></div>
                                        </div>
                                    ) : (
                                        <div className="bg-slate-50 border border-slate-200 p-8 rounded-[32px] shadow-sm">
                                            <h3 className="text-xl font-bold mb-8 text-slate-800">{currentSlide.question}</h3>
                                            {currentSlide.type === 'mcq' && (
                                                <div className="space-y-3">{currentSlide.options.map((opt, idx) => (
                                                    <button key={idx} disabled={isSlideCleared(currentSlide.id)} onClick={() => handleAnswerCheck(idx)} className={`w-full text-left p-5 rounded-2xl border-2 transition-all flex items-center justify-between ${isSlideCleared(currentSlide.id) && idx === currentSlide.answer ? 'border-emerald-500 bg-emerald-50 text-emerald-800' : 'border-white bg-white hover:border-indigo-200 hover:bg-slate-50'}`}>
                                                        <span className="font-semibold text-sm">{opt}</span>
                                                        {isSlideCleared(currentSlide.id) && idx === currentSlide.answer && <Icon name="CheckCircle2" className="text-emerald-500" />}
                                                    </button>
                                                ))}</div>
                                            )}
                                            {currentSlide.type === 'tf' && (
                                                <div className="flex gap-4">{[true, false].map((val) => (
                                                    <button key={val.toString()} disabled={isSlideCleared(currentSlide.id)} onClick={() => handleAnswerCheck(val)} className={`flex-1 p-6 rounded-2xl border-2 font-bold transition-all ${isSlideCleared(currentSlide.id) && val === currentSlide.answer ? 'border-emerald-500 bg-emerald-50 text-emerald-700' : 'border-white bg-white hover:border-indigo-200'}`}>{val ? 'TRUE' : 'FALSE'}</button>
                                                ))}</div>
                                            )}
                                            {currentSlide.type === 'fitb' && (
                                                <div className="relative">
                                                    <input type="text" placeholder="Type answer..." disabled={isSlideCleared(currentSlide.id)} className={`w-full p-5 rounded-2xl border-2 outline-none font-bold text-lg ${isSlideCleared(currentSlide.id) ? 'border-emerald-500 bg-emerald-50 text-emerald-900' : 'border-slate-200 focus:border-indigo-500 bg-white'}`} onKeyDown={(e) => e.key === 'Enter' && handleAnswerCheck(e.target.value)} />
                                                    {isSlideCleared(currentSlide.id) && <Icon name="CheckCircle2" className="absolute right-5 top-1/2 -translate-y-1/2 text-emerald-500" />}
                                                </div>
                                            )}
                                            {isSlideCleared(currentSlide.id) && (
                                                <div className="mt-8 p-6 rounded-2xl bg-emerald-50 text-emerald-800 border border-emerald-100 animate-in zoom-in-95"><div className="flex items-center gap-2 font-bold mb-2"><Icon name="Award" /> Correct!</div><p className="text-sm opacity-90">{currentSlide.explanation}</p></div>
                                            )}
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                        <footer className="no-print h-20 border-t bg-white px-8 flex items-center justify-between sticky bottom-0 z-10">
                            <button onClick={handlePrev} className="flex items-center gap-2 text-slate-500 hover:text-indigo-600 font-bold transition-all disabled:opacity-20" disabled={currentChapterIdx === 0 && currentSlideIdx === 0 && !courseCompleted}><Icon name="ChevronLeft" /> Prev</button>
                            <div className="flex items-center gap-1.5">{!courseCompleted && currentChapter.slides.map((s, idx) => <div key={idx} className={`h-1.5 rounded-full transition-all duration-300 ${idx === currentSlideIdx ? 'w-8 bg-indigo-600' : isSlideCleared(s.id) || s.type === 'explanation' ? 'w-2 bg-emerald-400' : 'w-2 bg-slate-200'}`} />)}</div>
                            {!courseCompleted && (
                                <button onClick={handleNext} className={`flex items-center gap-2 px-8 py-3 rounded-2xl font-extrabold transition-all shadow-lg ${isCurrentSlideCleared ? 'bg-indigo-600 text-white hover:bg-indigo-700 shadow-indigo-200' : 'bg-slate-100 text-slate-300 cursor-not-allowed shadow-none'}`}>
                                    {(currentSlideIdx === currentChapter.slides.length - 1 && currentChapterIdx === currentCourse.chapters.length - 1) ? 'Finish' : 'Next'} <Icon name="ChevronRight" />
                                </button>
                            )}
                        </footer>
                    </main>
                </div>
            );
        }
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
